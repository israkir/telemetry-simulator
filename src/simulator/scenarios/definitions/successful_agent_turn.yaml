# Successful Agent Turn Scenario
# Standard successful agent turn with planning, tool call, and LLM response

name: successful_agent_turn
description: >
  Standard successful agent turn with planning, MCP tool call, and LLM-generated
  final response. Represents the typical success path through the system.

tags:
  - baseline
  - success
  - smoke-test

repeat_count: 100
interval_ms: 500

emit_metrics: true
emit_logs: true

root:
  type: vendor.a2a.orchestrate
  latency:
    mean_ms: 1500
    variance: 0.3
  error:
    rate: 0.02
  attributes:
    vendor.turn.status.result: true
    vendor.turn.status.code: SUCCESS
    vendor.redaction.applied: basic
    vendor.a2a.agent.target.id: agent-successful-turn-001
    vendor.a2a.outcome: success

  children:
    - type: vendor.planner
      latency:
        mean_ms: 300
        variance: 0.2
      error:
        rate: 0.01
      attributes:
        vendor.planner.output.task.count: 2
        vendor.planner.output.entity.count: 1
        vendor.plan.policy.mode: balanced
        vendor.step.outcome: success

      children:
        - type: vendor.llm.call
          latency:
            mean_ms: 400
            variance: 0.3
          attributes:
            gen_ai.operation.name: chat
            gen_ai.system: openai
            gen_ai.request.model: gpt-4.1-mini
            vendor.step.outcome: success

    - type: vendor.mcp.tool.execute
      latency:
        mean_ms: 200
        variance: 0.4
      error:
        rate: 0.03
      attributes:
        gen_ai.operation.name: execute_tool
        gen_ai.tool.type: function
        gen_ai.tool.name: claims.getClaimStatus
        vendor.tool.system: mcp
        vendor.mcp.server.uuid: "11111111-2222-3333-4444-555555555555"
        vendor.mcp.tool.uuid: "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"
        vendor.mcp.tool.call.id: call_success_001
        vendor.step.outcome: success

    - type: vendor.llm.call
      latency:
        mean_ms: 600
        variance: 0.3
      error:
        rate: 0.01
      attributes:
        gen_ai.operation.name: chat
        gen_ai.system: openai
        gen_ai.request.model: gpt-4.1-mini
        vendor.step.outcome: success

    - type: vendor.response.compose
      latency:
        mean_ms: 80
        variance: 0.1
      error:
        rate: 0
      attributes:
        vendor.response.format: a2a_json
        vendor.step.outcome: success
